<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Carte entreprises — Stages CIEL (500+)</title>

<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
  /* Ajustements légers locaux */
  body{margin:0;background:#0b0f17;color:#e7eef6;font-family:Inter,Arial,Helvetica,sans-serif}
  main{margin-top:84px;max-width:1200px;margin-left:auto;margin-right:auto;padding:0 18px}
  .card{background:#0f1721;padding:18px;border-radius:12px;box-shadow:0 12px 30px rgba(0,0,0,0.5)}
  #map{width:100%;height:760px;border-radius:10px;overflow:hidden;margin-top:12px}
  .site-header{position:fixed;top:0;left:0;right:0;z-index:1200}
  .header-inner{max-width:1200px;margin:0 auto;display:flex;align-items:center;gap:18px;justify-content:space-between;padding:12px 18px;background:linear-gradient(90deg,#003a78,#0066cc);}
  .brand{display:flex;gap:12px;align-items:center}
  .logo-mark{width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg,#003a78,#00f0d1);display:flex;align-items:center;justify-content:center;font-weight:700;color:#021020}
  nav.main-nav ul{list-style:none;display:flex;gap:12px;margin:0;padding:0}
  nav.main-nav a{color:white;text-decoration:none;padding:8px 12px;border-radius:8px;font-weight:700}
  nav.main-nav a.btn-nav{color:#ffffff}
  @media(max-width:880px){
    nav.main-nav{display:none}
  }
</style>
</head>
<body>

<!-- Menu identique à index.html -->
<header class="site-header">
  <div class="header-inner">
    <div class="brand">
      <div class="logo-mark">CIEL</div>
      <div class="brand-text">
        <h1 style="margin:0;font-size:1rem">Section CIEL</h1>
        <p style="margin:0;font-size:0.82rem;color:#b6c7da">Cybersécurité · Informatique · Réseaux · Électronique</p>
      </div>
    </div>

    <button class="nav-toggle" aria-label="Menu">☰</button>

    <nav class="main-nav">
      <ul>
        <li><a href="index.html">Accueil</a></li>
        <li><a href="formation.html">Formation</a></li>
        <li><a href="projets.html">Projets</a></li>
        <li><a href="entreprises.html"style="background:#00f0d1">Partenaires</a></li>
        <li><a href="contacts.html">Contacts</a></li>
        <li><a href="associations.html">Associations</a></li>
        <li><a href="galerie.html">Lycée-Fourcade</a></li>
        <li><a href="job_form.html" class="btn-nav">Forum</a></li>
      </ul>
    </nav>
  </div>
</header>

<main>
  <section class="card">
    <h2 style="color:#00f0d1;margin:0 0 px 0">Carte — entreprises pour stages CIEL </h2>
    <p style="color:#98a0b3;margin:0 0 8px 0">Clique sur un point pour voir l'entreprise et la ville (sites approximatifs / implantations régionales).</p>
    <div id="map"></div>
    <p style="color:#9aa8bd;margin-top:8px;font-size:0.9rem">Astuce : zoome pour distinguer les points proches. Les marqueurs sont placés sur la ville.</p>
  </section>
</main>

<footer style="background:linear-gradient(90deg,#003a78,#0066cc);padding:14px;text-align:center;color:white;margin-top:18px">
  &copy; 2025 Section CIEL — entreprises pour stages
</footer>

<script>
/* ---------- LISTES (entreprises + villes) ---------- */

/* 1) Liste d'entreprises réelles (ESN, télécoms, industrie, cybersécurité, recherche, etc.) */
const companies = [
  "Orange","Capgemini","Sopra Steria","Atos","Thales","Dassault Systèmes","Safran","Schneider Electric","Alten",
  "Accenture","IBM","Microsoft","Google","Amazon Web Services","OVHcloud","Worldline","Inetum","Devoteam","CGI",
  "Nokia","Cisco Systems","Intel","STMicroelectronics","Bosch","Siemens","Valeo","Renault","Stellantis","Airbus",
  "Alstom","Naval Group","Dassault Aviation","Hexagon","Econocom","Eiffage","Vinci","Bouygues","SFR","Bouygues Telecom",
  "Orange Cyberdefense","Stormshield","Thales Alenia Space","Capgemini Engineering","Astek","Expleo","Neurones",
  "SII","Groupe Open","Smile","Aubay","GFT","CGX","ArianeGroup","Astek","Hexawin","Cegid","Egis","Nexans","Hermes",
  "Mistral Solutions","Advens","Groupe Open","IOTech","Iliad","M6 Web","Ubisoft","Dassault","Murex","Worldline",
  "Siemens Digital","Segula Technologies","Altran","Esker","Alstom Transport","Faurecia","Valeo Siemens","Groupe PSA",
  "Thales Digital","NavalTech","Criteo","OVH","Amadeus","Sagemcom","Inria","CEA","CEA Tech","INSEAD Tech","ArianeGroup"
];

/* 2) Liste villes françaises (centres / coordonnées précises des villes) — large couverture nationale, focus Sud */
const cities = [
  {nom:"Paris", lat:48.8566, lon:2.3522},
  {nom:"Marseille", lat:43.2965, lon:5.3698},
  {nom:"Lyon", lat:45.7640, lon:4.8357},
  {nom:"Toulouse", lat:43.6045, lon:1.4440},
  {nom:"Nice", lat:43.7102, lon:7.2620},
  {nom:"Nantes", lat:47.2184, lon:-1.5536},
  {nom:"Strasbourg", lat:48.5734, lon:7.7521},
  {nom:"Montpellier", lat:43.6108, lon:3.8767},
  {nom:"Bordeaux", lat:44.8378, lon:-0.5792},
  {nom:"Lille", lat:50.6292, lon:3.0573},
  {nom:"Rennes", lat:48.1173, lon:-1.6778},
  {nom:"Reims", lat:49.2583, lon:4.0317},
  {nom:"Le Havre", lat:49.4944, lon:0.1079},
  {nom:"Saint-Étienne", lat:45.4397, lon:4.3872},
  {nom:"Toulon", lat:43.1242, lon:5.9280},
  {nom:"Angers", lat:47.4784, lon:-0.5632},
  {nom:"Grenoble", lat:45.1885, lon:5.7245},
  {nom:"Dijon", lat:47.3220, lon:5.0415},
  {nom:"Nîmes", lat:43.8367, lon:4.3601},
  {nom:"Aix-en-Provence", lat:43.5297, lon:5.4474},
  {nom:"Brest", lat:48.3904, lon:-4.4861},
  {nom:"Le Mans", lat:48.0061, lon:0.1996},
  {nom:"Amiens", lat:49.8941, lon:2.2958},
  {nom:"Perpignan", lat:42.6887, lon:2.8948},
  {nom:"Metz", lat:49.1193, lon:6.1757},
  {nom:"Besançon", lat:47.2378, lon:6.0241},
  {nom:"Lorraine (Nancy)", lat:48.6921, lon:6.1844},
  {nom:"Orléans", lat:47.9029, lon:1.9093},
  {nom:"Mulhouse", lat:47.7508, lon:7.3359},
  {nom:"Perigueux", lat:45.1846, lon:0.7210},
  {nom:"Avignon", lat:43.9493, lon:4.8055},
  {nom:"Cannes", lat:43.5519, lon:7.0128},
  {nom:"Antibes", lat:43.5804, lon:7.1256},
  {nom:"Aubagne", lat:43.2896, lon:5.5708},
  {nom:"Salon-de-Provence", lat:43.6406, lon:5.0958},
  {nom:"Arles", lat:43.6766, lon:4.6278},
  {nom:"Marignane", lat:43.4390, lon:5.2145},
  {nom:"Istres", lat:43.5155, lon:4.9886},
  {nom:"Nîmes", lat:43.8370, lon:4.3601},
  {nom:"Tarn (Albi)", lat:43.9289, lon:2.1480},
  {nom:"Béziers", lat:43.3440, lon:3.2158},
  {nom:"Perpignan", lat:42.6986, lon:2.8956},
  {nom:"Montélimar", lat:44.5573, lon:4.7367},
  {nom:"Gap", lat:44.5594, lon:6.0794},
  {nom:"Digne-les-Bains", lat:44.0926, lon:6.2350},
  {nom:"Ajaccio", lat:41.9192, lon:8.7386},
  {nom:"Bastia", lat:42.6979, lon:9.4500},
  {nom:"Corte", lat:42.3034, lon:9.1533},
  {nom:"Poitiers", lat:46.5802, lon:0.3404},
  {nom:"La Rochelle", lat:46.1603, lon:-1.1511},
  {nom:"Niort", lat:46.3230, lon:-0.4589},
  {nom:"Valence", lat:44.9333, lon:4.8924},
  {nom:"Tarbes", lat:43.2334, lon:-0.0729},
  {nom:"Albi", lat:43.9289, lon:2.1480},
  {nom:"Nanterre", lat:48.8924, lon:2.2076},
  {nom:"Boulogne-Billancourt", lat:48.8356, lon:2.2394},
  {nom:"Rouen", lat:49.4432, lon:1.0993},
  {nom:"Calais", lat:50.9515, lon:1.8587},
  {nom:"Gravelines", lat:51.0150, lon:2.1297}, // datacenter OVH
  {nom:"Sophia Antipolis", lat:43.6167, lon:7.0556},
  {nom:"Gardanne", lat:43.4410, lon:5.4580},
  {nom:"Vitrolles", lat:43.4165, lon:5.2156},
  {nom:"La Ciotat", lat:43.1740, lon:5.6068},
  {nom:"Fos-sur-Mer", lat:43.3829, lon:4.9898},
  {nom:"Martigues", lat:43.4028, lon:5.0568},
  {nom:"Salon de Provence", lat:43.6419, lon:5.0949}
];

/* ---------- Construction dynamique pour atteindre un grand nombre de marqueurs ---------- */
const targetCount = 520; // nombre de points souhaités (tu peux augmenter)
const sites = [];
let i = 0;
while (sites.length < targetCount) {
  const company = companies[i % companies.length];
  const city = cities[i % cities.length];
  // créer un libellé type "Company - site régional (Ville)"
  const name = `${company} — site ${city.nom}`;
  // ajouter entrée
  sites.push({
    nom: name,
    company: company,
    ville: city.nom,
    lat: city.lat,
    lon: city.lon
  });
  i++;
}

/* ---------- Carte Leaflet ---------- */
const map = L.map('map').setView([44.0, 3.0], 6);

// tuiles
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  maxZoom: 18,
  attribution: '&copy; OpenStreetMap contributors'
}).addTo(map);

// icone
const blueIcon = L.icon({
  iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-blue.png',
  shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',
  iconSize: [25,41],
  iconAnchor: [12,41],
  popupAnchor: [1,-34],
  shadowSize: [41,41]
});

// ajouter les marqueurs — avec petit jitter pour éviter le recouvrement exact
sites.forEach((s, idx) => {
  const jitter = (Math.random() - 0.5) * 0.02; // ±0.01 deg ~ ±1km
  const jitter2 = (Math.random() - 0.5) * 0.02;
  const lat = s.lat + jitter;
  const lon = s.lon + jitter2;

  const popup = `<strong>${escapeHtml(s.company)}</strong><br><em>${escapeHtml(s.nom)}</em><br>${escapeHtml(s.ville)}<br><small>Implantation approximative</small>`;
  L.marker([lat, lon], {icon: blueIcon}).addTo(map).bindPopup(popup);
});

// utilitaire simple pour échapper le HTML dans les popups
function escapeHtml(str){
  if(!str) return '';
  return String(str).replace(/[&<>"'`=\/]/g, function(s){
    return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;','/':'&#x2F;','`':'&#x60;','=':'&#x3D;'})[s];
  });
}
</script>

<script src="js/script.js"></script> <!-- si tu as le contrôle mobile/menu hamburger -->
</body>
</html>
